import "./chunk-KBPA4XTM.js";
import "./chunk-3XMJBBXN.js";
import {
  useIntersectionObserver
} from "./chunk-YJXB3UHV.js";
import {
  VImg
} from "./chunk-UY7BVIDU.js";
import "./chunk-YB7Q5SWG.js";
import "./chunk-FHFIUELN.js";
import "./chunk-A7WR4HSA.js";
import "./chunk-WSGA36HT.js";
import "./chunk-LWHVIGTD.js";
import {
  useResizeObserver
} from "./chunk-P72HKUKM.js";
import "./chunk-PK4OJT32.js";
import {
  useDisplay
} from "./chunk-SRSKL3SD.js";
import "./chunk-QCWSYGJH.js";
import "./chunk-J7QA6DCL.js";
import "./chunk-572DIRNC.js";
import "./chunk-UMLFGXUB.js";
import {
  clamp,
  genericComponent,
  getScrollParent,
  makeComponentProps,
  propsFactory,
  useRender
} from "./chunk-5ZEBGDBF.js";
import {
  computed,
  createVNode,
  onBeforeUnmount,
  ref,
  watch,
  watchEffect
} from "./chunk-U3LI7FBV.js";
import "./chunk-PZ5AY32C.js";

// node_modules/vuetify/lib/components/VParallax/VParallax.js
import "C:/Users/AARUSHI/Downloads/ronwiz3/ronwiz/portfolio/node_modules/vuetify/lib/components/VParallax/VParallax.css";
function floor(val) {
  return Math.floor(Math.abs(val)) * Math.sign(val);
}
var makeVParallaxProps = propsFactory({
  scale: {
    type: [Number, String],
    default: 0.5
  },
  ...makeComponentProps()
}, "VParallax");
var VParallax = genericComponent()({
  name: "VParallax",
  props: makeVParallaxProps(),
  setup(props, _ref) {
    let {
      slots
    } = _ref;
    const {
      intersectionRef,
      isIntersecting
    } = useIntersectionObserver();
    const {
      resizeRef,
      contentRect
    } = useResizeObserver();
    const {
      height: displayHeight
    } = useDisplay();
    const root = ref();
    watchEffect(() => {
      var _a;
      intersectionRef.value = resizeRef.value = (_a = root.value) == null ? void 0 : _a.$el;
    });
    let scrollParent;
    watch(isIntersecting, (val) => {
      if (val) {
        scrollParent = getScrollParent(intersectionRef.value);
        scrollParent = scrollParent === document.scrollingElement ? document : scrollParent;
        scrollParent.addEventListener("scroll", onScroll, {
          passive: true
        });
        onScroll();
      } else {
        scrollParent.removeEventListener("scroll", onScroll);
      }
    });
    onBeforeUnmount(() => {
      scrollParent == null ? void 0 : scrollParent.removeEventListener("scroll", onScroll);
    });
    watch(displayHeight, onScroll);
    watch(() => {
      var _a;
      return (_a = contentRect.value) == null ? void 0 : _a.height;
    }, onScroll);
    const scale = computed(() => {
      return 1 - clamp(Number(props.scale));
    });
    let frame = -1;
    function onScroll() {
      if (!isIntersecting.value) return;
      cancelAnimationFrame(frame);
      frame = requestAnimationFrame(() => {
        var _a;
        const el = ((_a = root.value) == null ? void 0 : _a.$el).querySelector(".v-img__img");
        if (!el) return;
        const scrollHeight = scrollParent instanceof Document ? document.documentElement.clientHeight : scrollParent.clientHeight;
        const scrollPos = scrollParent instanceof Document ? window.scrollY : scrollParent.scrollTop;
        const top = intersectionRef.value.getBoundingClientRect().top + scrollPos;
        const height = contentRect.value.height;
        const center = top + (height - scrollHeight) / 2;
        const translate = floor((scrollPos - center) * scale.value);
        const sizeScale = Math.max(1, (scale.value * (scrollHeight - height) + height) / height);
        el.style.setProperty("transform", `translateY(${translate}px) scale(${sizeScale})`);
      });
    }
    useRender(() => createVNode(VImg, {
      "class": ["v-parallax", {
        "v-parallax--active": isIntersecting.value
      }, props.class],
      "style": props.style,
      "ref": root,
      "cover": true,
      "onLoadstart": onScroll,
      "onLoad": onScroll
    }, slots));
    return {};
  }
});
export {
  VParallax
};
//# sourceMappingURL=vuetify_components_VParallax.js.map
